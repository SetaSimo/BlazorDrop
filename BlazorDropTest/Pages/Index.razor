@page "/"
@using BlazorDrop
@using BlazorDrop.Components
@using BlazorDrop.Components.Loading

<style>
    .state-debug {
        background: #f1f3f5;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        display: block;
        margin-top: 5px;
        color: #495057;
        border-left: 3px solid #0d6efd;
    }
</style>

<div class="container pb-5">

    <h3 class="mb-4">BlazorDrop – Test Playground</h3>

    <TestCard Title="Single Select (Two-way Bind)">
        <BlazorDropSelect T="SelectItem"
                          Placeholder="Select value"
                          @bind-Value="@_singleSelected"
                          DisplaySelector="@(x => x.Text)"
                          OnLoadItemsAsync="LoadItemsPagedAsync"
                          SearchAsync="SearchAsync"
                          OnItemClickAsync="OnSingleSelected" />
        <code class="state-debug">Parent State: @(_singleSelected?.Text ?? "NULL")</code>
    </TestCard>

    <TestCard Title="Initially NULL (Manual Update)">
        <BlazorDropSelect T="SelectItem"
                          Placeholder="Starts null"
                          Value="@_nullSelected"
                          DisplaySelector="@(x => x.Text)"
                          OnLoadItemsAsync="LoadItemsPagedAsync"
                          OnItemClickAsync="OnNullSelected" />
        <code class="state-debug">Parent State: @(_nullSelected?.Text ?? "NULL")</code>
    </TestCard>

    <TestCard Title="Multi Select">
        <BlazorDropMultiSelect T="SelectItem"
                               Placeholder="Multi select"
                               DisplaySelector="@(x => x.Text)"
                               OnLoadItemsAsync="LoadItemsPagedAsync"
                               SearchAsync="SearchAsync"
                               OnItemClickAsync="OnMultiSelected" />
        <code class="state-debug">Selected Count: @_multiSelected.Count | Items: @(string.Join(", ", _multiSelected.Select(x => x.Text)))</code>
    </TestCard>

    <TestCard Title="Custom Template">
        <BlazorDropSelect T="SelectItem"
                          Placeholder="Template"
                          Value="@_templatedSelected"
                          DisplaySelector="@(x => x.Text)"
                          OnLoadItemsAsync="LoadItemsPagedAsync"
                          OnItemClickAsync="OnTemplateSelected">
            <ItemTemplate Context="item">
                <span class="badge bg-success">@item.Text</span>
            </ItemTemplate>
        </BlazorDropSelect>
        <code class="state-debug">Parent State: @(_templatedSelected?.Text ?? "NULL")</code>
    </TestCard>

    <TestCard Title="Disabled">
        <BlazorDropSelect T="SelectItem"
                          Placeholder="Disabled"
                          Disabled="true"
                          Value="@_disabledSelected"
                          DisplaySelector="@(x => x.Text)"
                          OnLoadItemsAsync="LoadItemsPagedAsync" />
    </TestCard>

</div>